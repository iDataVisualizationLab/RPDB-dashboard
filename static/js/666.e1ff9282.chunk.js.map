{"version":3,"file":"static/js/666.e1ff9282.chunk.js","mappings":"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","sources":["Providers/Database/Context.js","Providers/Database/Provider.js","Providers/Database/index.js","containers/Database/index.js","containers/LayoutContainer/index.js"],"sourcesContent":["import React from 'react'\r\n\r\nexport const Context = React.createContext(null)\r\n\r\nexport default Context","import React, {useCallback, useEffect, useReducer} from 'react'\r\nimport Context from './Context'\r\nimport {_components} from \"../../containers/Database/internal\";\r\nimport {uniq} from 'lodash';\r\nimport {getApp} from \"../../containers/Database/app\";\r\n\r\nfunction reducer(state, action) {\r\n    const { type, path, isLoading=false,error = false,\r\n        hasError = false, value } = action;\r\n    switch (type) {\r\n        case \"LOADING_CHANGED\":\r\n            return { ...state, [path]: { ...state[path], isLoading } };\r\n        case \"VALUE_CHANGE\":\r\n            return {\r\n                ...state,\r\n                [path]: { ...state[path], value, isLoading, error, hasError },\r\n            };\r\n        case \"INIT\":\r\n            return {...state,isInit:value}\r\n        default:\r\n            throw new Error()\r\n    }\r\n}\r\n\r\nconst init = {\r\n    loading:false,\r\n    error:false,\r\n    isInit:false,\r\n    surveyType:{},\r\n    surveyLevel:{},\r\n    section:{}\r\n}\r\n\r\nconst Provider = ({  children, name }) => {\r\n    const [state, dispatch] = useReducer(reducer, init);\r\n    const _app = getApp(name);\r\n\r\n    useEffect(()=>{\r\n        // if (!state['surveyType']) {\r\n            try {\r\n                dispatch({type: 'LOADING_CHANGED', path: 'surveyType', isLoading: true});\r\n                _app.getSurveyType().then(({data}) => {\r\n                    dispatch({type: 'VALUE_CHANGE', path: 'surveyType', value: data, isLoading: false,});\r\n                }).catch(error => {\r\n                    dispatch({\r\n                        type: \"ERROR\",\r\n                        path: 'surveyType',\r\n                        isLoading: false,\r\n                        error,\r\n                        hasError: true,\r\n                    });\r\n                })\r\n                dispatch({type: 'LOADING_CHANGED', path: 'surveyLevel', isLoading: true});\r\n                _app.getSurveyLevel().then(({data}) => {\r\n                    dispatch({type: 'VALUE_CHANGE', path: 'surveyLevel', value: data, isLoading: false,});\r\n                }).catch(error => {\r\n                    dispatch({\r\n                        type: \"ERROR\",\r\n                        path: 'surveyLevel',\r\n                        isLoading: false,\r\n                        error,\r\n                        hasError: true,\r\n                    });\r\n                })\r\n            } catch (e) {\r\n\r\n            }\r\n        // }\r\n    },[])\r\n\r\n    const isLoading = useCallback(\r\n        (path) => {\r\n            return state[path] ? state[path].isLoading : false;\r\n        },\r\n        [state]\r\n    );\r\n    const getList = useCallback(\r\n        (path) => {\r\n            return state[path] && state[path].value ? state[path].value : [];\r\n        },\r\n        [state]\r\n    );\r\n    const querySection = useCallback(\r\n        (Section) => {\r\n            dispatch({type: 'LOADING_CHANGED', path: 'section', isLoading: true});\r\n            _app.getSection(Section)\r\n                .then(({data})=> {\r\n                    dispatch({type: 'VALUE_CHANGE', path: 'section', value: data, isLoading: false,});\r\n                })\r\n                .catch(error=>{\r\n                    dispatch({\r\n                        type: \"ERROR\",\r\n                        path: 'section',\r\n                        isLoading: false,\r\n                        error,\r\n                        hasError: true,\r\n                    });\r\n                })\r\n        },\r\n        [state]\r\n    );\r\n    const getSection = useCallback(\r\n        (Section) => {\r\n            return state.section && state.section.value && Section===state.section.value.Section ? state.section.value : {};\r\n        },\r\n        [state]\r\n    );\r\n    return (\r\n        <Context.Provider value={{\r\n            isLoading,\r\n            getList,\r\n            querySection,\r\n            getSection\r\n        }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}\r\n\r\nexport default Provider;","import { useContext } from 'react'\r\nimport Context from './Context'\r\nexport { default as withDatabase } from './with.js'\r\nexport { default } from './Provider.js'\r\n\r\nexport function useDatabase() {\r\n    return useContext(Context)\r\n}","import React, { useEffect } from \"react\";\r\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\r\nimport { AdapterMoment as DateAdapter } from \"@mui/x-date-pickers/AdapterMoment\";\r\nimport {useConfig} from \"base-shell/lib/providers/Config\";\r\nimport {useAuth} from \"base-shell/lib/providers/Auth\";\r\nimport DataProvider from \"../../Providers/Database\"\r\nimport {getApp,initializeApp} from \"./app\"\r\n\r\nexport default function ({ children }) {\r\n    const { appConfig } = useConfig();\r\n    const auth = useAuth();\r\n    const { database: databaseConfig, auth: authConfig = {} } = appConfig || {};\r\n    const { prod = {}, dev = {} } = databaseConfig || {};\r\n    const { onAuthStateChanged: internalOnAuthStateChanged } = authConfig || {};\r\n\r\n\r\n    if (!getApp('api')) {\r\n        initializeApp('api',\r\n            process.env.NODE_ENV !== \"production\" ? dev.initConfig : prod.initConfig\r\n        );\r\n    }\r\n    useEffect(() => {\r\n\r\n        const unsubscribe = getApp('api').onAuthFalse =  ()=>internalOnAuthStateChanged(auth);\r\n\r\n        // return () => {\r\n        //     unsubscribe();\r\n        // };\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    return (\r\n        <DataProvider name={'api'}>\r\n            <LocalizationProvider dateAdapter={DateAdapter}>\r\n                {children}\r\n            </LocalizationProvider>\r\n        </DataProvider>\r\n    )\r\n}","\"use strict\";\r\n\r\nexports.__esModule = true;\r\nexports[\"default\"] = _default;\r\n\r\nvar _LayoutContainer = _interopRequireDefault(require(\"material-ui-shell/lib/containers/LayoutContainer/LayoutContainer\"));\r\n\r\nvar _FirebaseContainer = _interopRequireDefault(require(\"../Database\"));\r\n\r\nvar _react = _interopRequireDefault(require(\"react\"));\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\r\n\r\nfunction _default(_ref) {\r\n    var children = _ref.children;\r\n    return /*#__PURE__*/_react[\"default\"].createElement(_LayoutContainer[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_FirebaseContainer[\"default\"], null, children));\r\n}\r\n\r\nmodule.exports = exports.default;"],"names":["React","reducer","state","action","type","path","isLoading","error","hasError","value","isInit","Error","init","loading","surveyType","surveyLevel","section","children","name","useReducer","dispatch","_app","getApp","useEffect","getSurveyType","then","data","catch","getSurveyLevel","e","useCallback","getList","querySection","Section","getSection","useDatabase","useContext","Context","appConfig","useConfig","auth","useAuth","databaseConfig","database","authConfig","prod","internalOnAuthStateChanged","dev","onAuthStateChanged","initializeApp","initConfig","onAuthFalse","dateAdapter","DateAdapter","exports","__esModule","_ref","_react","createElement","_LayoutContainer","_FirebaseContainer","_interopRequireDefault","require","obj","module","default"],"sourceRoot":""}