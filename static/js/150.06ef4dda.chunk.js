"use strict";(self.webpackChunkrpdb_dash=self.webpackChunkrpdb_dash||[]).push([[150],{99997:function(e,t,n){n.d(t,{J:function(){return c},u:function(){return o}});var a=n(40558),i=n(95764),r=n(62656),l=n(80184),o={excel:{type:"xlsx",icon:function(e){var t=e.fontSize,n=void 0===t?"large":t,i=e.style,r=void 0===i?{}:i;return(0,l.jsxs)(a.Z,{fontSize:n,style:r,children:[(0,l.jsx)("path",{d:"M20 16l-5.758-2.368L9 16v10.834A1.166 1.166 0 0 0 10.167 28h18.667A1.166 1.166 0 0 0 30 26.834V22z",fill:"#185c37"}),(0,l.jsx)("path",{d:"M20 4h-9.833A1.167 1.167 0 0 0 9 5.167V10l11 6 5 2.368L30 16v-6z",fill:"#21a366"}),(0,l.jsx)("path",{d:"M28.834 4H20v6h10V5.167A1.166 1.166 0 0 0 28.834 4z",fill:"#33c481"}),(0,l.jsx)("path",{fill:"#107c41",d:"M9 10h11v6H9zm11 6h10v6H20z"}),(0,l.jsx)("path",{d:"M17 11v11.83A1.178 1.178 0 0 1 15.83 24H9V10h7a1 1 0 0 1 1 1z",opacity:".5"}),(0,l.jsx)("rect",{x:"2.001",y:"9",width:"13.999",height:"13.999",rx:"1.167",fill:"#107c41"}),(0,l.jsx)("path",{d:"M5.092 20.375l2.831-4.387-2.593-4.363h2.087l1.415 2.789q.195.4.269.591h.018c.094-.211.191-.416.293-.616l1.513-2.764h1.916l-2.66 4.338 2.727 4.412H10.87l-1.635-3.063a2.569 2.569 0 0 1-.2-.409h-.02a1.88 1.88 0 0 1-.189.4l-1.684 3.072z",fill:"#fff"})]})}},doc:{type:"doc",icon:function(e){var t=e.fontSize,n=void 0===t?"large":t,i=e.style,r=void 0===i?{}:i;return(0,l.jsxs)(a.Z,{fontSize:n,style:r,viewBox:"0 0 16 16",children:[(0,l.jsx)("path",{d:"M16 4V1a1.003 1.003 0 0 0-1-1H4a1 1 0 0 0-1 1v3l6.5 1.379z",fill:"#41a5ee"}),(0,l.jsx)("path",{fill:"#2b7cd3",d:"M15.999 4h-13v4L9.5 9.168 15.999 8V4z"}),(0,l.jsx)("path",{fill:"#185abd",d:"M16 8H3v4l6.499 1L16 12V8z"}),(0,l.jsx)("path",{d:"M3 12v3a1.003 1.003 0 0 0 1 1h11a1 1 0 0 0 1-1v-3z",fill:"#103f91"}),(0,l.jsx)("path",{d:"M10 4.003L3 4l.002 10H9a2 2 0 0 0 2-2V5.002a1 1 0 0 0-1-1z",opacity:".5"}),(0,l.jsx)("rect",{y:"3",width:"10",height:"10",rx:"1",fill:"#185abd"}),(0,l.jsx)("path",{d:"M3.352 9.54q.026.213.034.372h.02q.011-.15.045-.364t.065-.36L4.429 5H5.61l.945 4.126a6.335 6.335 0 0 1 .118.778h.016a6.293 6.293 0 0 1 .098-.753L7.543 5h1.075l-1.323 6H6.04l-.901-3.975q-.04-.171-.089-.448t-.06-.401h-.017q-.015.146-.06.435t-.073.427L3.992 11H2.716L1.382 5h1.094L3.3 9.197q.028.13.053.343z",fill:"#fff"})]})}},pdf:{type:"pdf",icon:function(e){var t=e.fontSize,n=void 0===t?"large":t,i=e.style,r=void 0===i?{}:i;return(0,l.jsxs)(a.Z,{fontSize:n,style:r,viewBox:"0 0 14 16",children:[(0,l.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",children:[(0,l.jsx)("polygon",{points:"51.791 356.65 51.791 23.99 204.5 23.99 282.65 102.07 282.65 356.65",fill:"#fff",strokeWidth:"212.65"}),(0,l.jsx)("path",{d:"m201.19 31.99 73.46 73.393v243.26h-214.86v-316.66h141.4m6.623-16h-164.02v348.66h246.85v-265.9z",strokeWidth:"21.791"})]}),(0,l.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",children:[(0,l.jsx)("polygon",{points:"282.65 356.65 51.791 356.65 51.791 23.99 204.5 23.99 206.31 25.8 206.31 100.33 280.9 100.33 282.65 102.07",fill:"#fff",strokeWidth:"212.65"}),(0,l.jsx)("path",{d:"m198.31 31.99v76.337h76.337v240.32h-214.86v-316.66h138.52m9.5-16h-164.02v348.66h246.85v-265.9l-6.43-6.424h-69.907v-69.842z",strokeWidth:"21.791"})]}),(0,l.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",strokeWidth:"21.791",children:[(0,l.jsx)("polygon",{points:"258.31 87.75 219.64 87.75 219.64 48.667 258.31 86.38"}),(0,l.jsx)("path",{d:"m227.64 67.646 12.41 12.104h-12.41v-12.104m-5.002-27.229h-10.998v55.333h54.666v-12.742z"})]}),(0,l.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",fill:"#ed1c24",strokeWidth:"212.65",children:[(0,l.jsx)("polygon",{points:"311.89 284.49 22.544 284.49 22.544 167.68 37.291 152.94 37.291 171.49 297.15 171.49 297.15 152.94 311.89 167.68"}),(0,l.jsx)("path",{d:"m303.65 168.63 1.747 1.747v107.62h-276.35v-107.62l1.747-1.747v9.362h272.85v-9.362m-12.999-31.385v27.747h-246.86v-27.747l-27.747 27.747v126h302.35v-126z"})]}),(0,l.jsx)("rect",{x:"1.7219",y:"7.9544",width:"10.684",height:"4.0307",fill:"none"}),(0,l.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 1.7219 11.733)",fill:"#fff",strokeWidth:"21.791",children:[(0,l.jsx)("path",{d:"m9.216 0v-83.2h30.464q6.784 0 12.928 1.408 6.144 1.28 10.752 4.608 4.608 3.2 7.296 8.576 2.816 5.248 2.816 13.056 0 7.68-2.816 13.184-2.688 5.504-7.296 9.088-4.608 3.456-10.624 5.248-6.016 1.664-12.544 1.664h-8.96v26.368zm22.016-43.776h7.936q6.528 0 9.6-3.072 3.2-3.072 3.2-8.704t-3.456-7.936-9.856-2.304h-7.424z"}),(0,l.jsx)("path",{d:"m87.04 0v-83.2h24.576q9.472 0 17.28 2.304 7.936 2.304 13.568 7.296t8.704 12.8q3.2 7.808 3.2 18.816t-3.072 18.944-8.704 13.056q-5.504 5.12-13.184 7.552-7.552 2.432-16.512 2.432zm22.016-17.664h1.28q4.48 0 8.448-1.024 3.968-1.152 6.784-3.84 2.944-2.688 4.608-7.424t1.664-12.032-1.664-11.904-4.608-7.168q-2.816-2.56-6.784-3.456-3.968-1.024-8.448-1.024h-1.28z"}),(0,l.jsx)("path",{d:"m169.22 0v-83.2h54.272v18.432h-32.256v15.872h27.648v18.432h-27.648v30.464z"})]})]})}},image:{type:"image",icon:function(e){var t=e.fontSize,n=void 0===t?"large":t,a=e.style,r=void 0===a?{}:a;return(0,l.jsx)(i.Z,{fontSize:n,style:r})}},unknown:{type:void 0,icon:function(e){var t=e.fontSize,n=void 0===t?"large":t,a=e.style,i=void 0===a?{}:a;return(0,l.jsx)(r.Z,{fontSize:n,style:i})}}},s={xlsx:"excel",xls:"excel",doc:"doc",docx:"doc",pdf:"pdf",jpg:"image",png:"image",gif:"image",webp:"image",tiff:"image",raw:"image",bmp:"image",heif:"image",jpeg:"image",svg:"image",eps:"image"};function c(e){var t=e.split("."),n=t[t.length-1].toLowerCase();return s[n]}},80150:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(74165),i=n(15861),r=n(29439),l=n(93539),o=n(7043),s=n(28920),c=n.n(s),f=n(72791),u=n(5849),d=n(4567),h=n(99997),p=n(80184);var v=function(e){var t=e.multiple,n=e.fileType,a=e.handleFile,i=void 0===a?function(){}:a,l=f.useState(!1),o=(0,r.Z)(l,2),s=o[0],c=o[1],v=f.useRef(null),x=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)};return(0,p.jsxs)("form",{className:"form-file-upload",onDragEnter:x,onSubmit:function(e){return e.preventDefault()},style:{margin:"auto"},children:[(0,p.jsx)("input",{ref:v,type:"file",className:"input-file-upload",multiple:t,onChange:function(e){e.preventDefault(),e.target.files&&e.target.files[0]&&i(e.target.files)}}),(0,p.jsx)("label",{htmlFor:"input-file-upload",className:"label-file-upload ".concat(s?"drag-active":""),children:(0,p.jsxs)("div",{children:[h.u[n].icon({}),(0,p.jsx)("p",{children:"Drag and drop your file here or"}),(0,p.jsx)(u.Z,{className:"upload-button",onClick:function(){v.current.click()},children:"Upload a file"}),(0,p.jsxs)(d.Z,{variant:"subtitle2",children:["Support ",h.u[n].type]})]})}),s&&(0,p.jsx)("div",{className:"drag-file-element",onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:function(e){e.preventDefault(),e.stopPropagation(),c(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&i(e.dataTransfer.files)}})]})},x=n(67414),m=n(18060),g=n(71554),j=n(34045),y=n(19628),b=n(64554),z=n(90977),S=n(41557),k=function(e){var t=e.data,n=e.onSelectRow,a=e.onUpload,i=(0,f.useMemo)((function(){if(t[0]){var e=[];return Object.keys(t[0]).forEach((function(t){"_id"!==t&&e.push({accessorKey:t,header:t})})),e}return[]}),[t]),l=(0,f.useRef)(null),o=(0,f.useState)(!1),s=(0,r.Z)(o,2),c=s[0],u=(s[1],(0,f.useState)([])),d=(0,r.Z)(u,2),h=d[0],v=d[1],x=(0,f.useState)({}),m=(0,r.Z)(x,2),g=m[0],j=m[1];(0,f.useEffect)((function(){console.log("I have been call!!!")}),[t]),(0,f.useEffect)((function(){var e;null===(e=l.current)||void 0===e||e.scrollToIndex(0)}),[h]);var k=(0,f.useCallback)((function(){return t.filter((function(e,t){return g[t]}))}),[g]);return(0,p.jsx)(y.ZP,{columns:i,data:t,enableGlobalFilterModes:!0,selectAllMode:"all",muiTableContainerProps:{sx:{maxHeight:"100%"}},initialState:{density:"compact"},onSortingChange:v,state:{isLoading:c,sorting:h,rowSelection:g},enableRowSelection:!0,onRowSelectionChange:j,muiTableBodyRowProps:function(e){var t=e.row;return{onClick:function(){n(t.original)},sx:{cursor:"pointer"}}},enableColumnResizing:!0,defaultColumn:{minSize:40,maxSize:9001,size:120},renderTopToolbarCustomActions:function(e){e.table;return(0,p.jsx)(b.Z,{sx:{display:"flex",gap:"1rem"},children:a&&Object.keys(g).length?(0,p.jsxs)(z.Z,{onClick:function(){return a(k())},size:"small",children:[" Upload",(0,p.jsx)(S.Z,{})]}):""})},renderToolbarInternalActions:function(e){var t=e.table;return(0,p.jsxs)(b.Z,{children:[(0,p.jsx)(y.Qn,{table:t}),(0,p.jsx)(y.kx,{table:t}),(0,p.jsx)(y.UN,{table:t}),(0,p.jsx)(y._c,{table:t})]})},positionToolbarAlertBanner:"bottom"})},Z=n(38664),w=n(25216);n(68218);var C=n(98246),T=n(98333),M={"Test Section ":"Section","Section Data Type":"Data Type",Thickness:"Slab Thickness",CCSJ:"CSJ"},q=function(){var e=(0,l.Z)(),t=(0,f.useState)(!0),n=(0,r.Z)(t,2),s=n[0],u=n[1],h=(0,f.useState)([]),y=(0,r.Z)(h,2),b=y[0],z=y[1],S=(0,f.useState)({}),q=(0,r.Z)(S,2),D=q[0],L=q[1],H=(0,f.useState)([]),E=(0,r.Z)(H,2),N=E[0],_=E[1],A=(0,f.useTransition)(),V=(0,r.Z)(A,2),R=V[0],W=V[1],B=(0,C.useSnackbar)().enqueueSnackbar;(0,f.useEffect)((function(){(0,Z.Mq)().getSectionFields().then((function(e){var t=e.data;_(t)}))}),[]),(0,f.useEffect)((function(){if(D.data&&D.data[0]){var e=Object.keys(D.data[0]),t={};N.forEach((function(e){e.replaceKey=void 0,t[e.name]=e})),e.forEach((function(e){t[e]?t[e].replaceKey=e:M[e]&&(t[M[e]].replaceKey=e)})),_(N)}}),[D,N]);var F=(0,f.useCallback)((function(){return u(!1)})),K=(0,f.useCallback)((function(e){W((0,i.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,e[0].arrayBuffer().then((function(t){var n=(0,j.ij)(t,{type:"array"}),a=n.SheetNames.map((function(e){var t={name:e,data:[]};return t.data=j.P6.sheet_to_json(n.Sheets[e]),t}));return a[0].__fileName=e[0].name,L(a[0]),a})).catch((function(e){return[]}));case 3:n=t.sent,z(n),F();case 6:case"end":return t.stop()}}),t)}))))})),O=(0,f.useCallback)((function(e){W((function(){var t=e.map((function(e){var t={};return N.forEach((function(n){n.replaceKey&&(t[n.name]=e[n.replaceKey])})),t}));(0,Z.Mq)().uploadSectionData(t).then((function(e){B("Success upload",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}})})).catch((function(e){B("Error!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"}})}))}))}),[N]);return(0,p.jsxs)(o.default,{pageTitle:e.formatMessage({id:"uploadData"}),children:[(0,p.jsxs)(c(),{children:[s&&(0,p.jsx)("div",{style:{width:"100%",height:"100%",display:"flex"},children:(0,p.jsx)(v,{multiple:!1,fileType:"excel",handleFile:K})}),!!b.length&&(0,p.jsx)(w.LB,{children:(0,p.jsx)(x.Z,{children:(0,p.jsx)(k,{data:D.data,tableName:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Z,{variant:"subtitle1",component:"span",children:D.__fileName})," ",(0,p.jsx)(T.default,{fontSize:"small"})," ",D.name]}),onUpload:O,onDelete:!0})})})]}),R&&(0,p.jsx)(m.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},children:(0,p.jsx)(g.Z,{color:"inherit"})})]})}}}]);
//# sourceMappingURL=150.06ef4dda.chunk.js.map