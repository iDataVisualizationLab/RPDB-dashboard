"use strict";(self.webpackChunkrpdb_dash=self.webpackChunkrpdb_dash||[]).push([[155],{98297:function(e,n,t){t.d(n,{ZP:function(){return h},Wz:function(){return f}});var a=t(72791),i=a.createContext(null),r=t(80184),s=t(29439),l=t(4942),o=t(1413),c=(t(65523),t(763),t(38664));function u(e,n){var t=n.type,a=n.path,i=n.isLoading,r=void 0!==i&&i,s=n.error,c=void 0!==s&&s,u=n.hasError,d=void 0!==u&&u,h=n.value;switch(t){case"LOADING_CHANGED":return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},a,(0,o.Z)((0,o.Z)({},e[a]),{},{isLoading:r})));case"VALUE_CHANGE":return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},a,(0,o.Z)((0,o.Z)({},e[a]),{},{value:h,isLoading:r,error:c,hasError:d})));case"INIT":return(0,o.Z)((0,o.Z)({},e),{},{isInit:h});default:throw new Error}}var d={loading:!1,error:!1,isInit:!1,surveyType:{},surveyLevel:{},section:{}},h=function(e){var n=e.children,t=e.name,l=(0,a.useReducer)(u,d),o=(0,s.Z)(l,2),h=o[0],f=o[1],v=(0,c.Mq)(t);(0,a.useEffect)((function(){if(!h.surveyType)try{f({type:"LOADING_CHANGED",path:"surveyType",isLoading:!0}),v.getSurveyType().then((function(e){var n=e.data;f({type:"VALUE_CHANGE",path:"surveyType",value:n,isLoading:!1})})).catch((function(e){f({type:"ERROR",path:"surveyType",isLoading:!1,error:e,hasError:!0})})),f({type:"LOADING_CHANGED",path:"surveyLevel",isLoading:!0}),v.getSurveyLevel().then((function(e){var n=e.data;f({type:"VALUE_CHANGE",path:"surveyLevel",value:n,isLoading:!1})})).catch((function(e){f({type:"ERROR",path:"surveyLevel",isLoading:!1,error:e,hasError:!0})}))}catch(e){}}),[]);var p=(0,a.useCallback)((function(e){return!!h[e]&&h[e].isLoading}),[h]),x=(0,a.useCallback)((function(e){return h[e]&&h[e].value?h[e].value:[]}),[h]),m=(0,a.useCallback)((function(e){f({type:"LOADING_CHANGED",path:"section",isLoading:!0}),v.getSection(e).then((function(e){var n=e.data;f({type:"VALUE_CHANGE",path:"section",value:n,isLoading:!1})})).catch((function(e){f({type:"ERROR",path:"section",isLoading:!1,error:e,hasError:!0})}))}),[h]),g=(0,a.useCallback)((function(e){return h.section&&h.section.value&&e===h.section.value.Section?h.section.value:{}}),[h]);return(0,r.jsx)(i.Provider,{value:{isLoading:p,getList:x,querySection:m,getSection:g},children:n})};function f(){return(0,a.useContext)(i)}},99997:function(e,n,t){t.d(n,{J:function(){return c},u:function(){return l}});var a=t(40558),i=t(95764),r=t(62656),s=t(80184),l={excel:{type:"xlsx",icon:function(e){var n=e.fontSize,t=void 0===n?"large":n,i=e.style,r=void 0===i?{}:i;return(0,s.jsxs)(a.Z,{fontSize:t,style:r,children:[(0,s.jsx)("path",{d:"M20 16l-5.758-2.368L9 16v10.834A1.166 1.166 0 0 0 10.167 28h18.667A1.166 1.166 0 0 0 30 26.834V22z",fill:"#185c37"}),(0,s.jsx)("path",{d:"M20 4h-9.833A1.167 1.167 0 0 0 9 5.167V10l11 6 5 2.368L30 16v-6z",fill:"#21a366"}),(0,s.jsx)("path",{d:"M28.834 4H20v6h10V5.167A1.166 1.166 0 0 0 28.834 4z",fill:"#33c481"}),(0,s.jsx)("path",{fill:"#107c41",d:"M9 10h11v6H9zm11 6h10v6H20z"}),(0,s.jsx)("path",{d:"M17 11v11.83A1.178 1.178 0 0 1 15.83 24H9V10h7a1 1 0 0 1 1 1z",opacity:".5"}),(0,s.jsx)("rect",{x:"2.001",y:"9",width:"13.999",height:"13.999",rx:"1.167",fill:"#107c41"}),(0,s.jsx)("path",{d:"M5.092 20.375l2.831-4.387-2.593-4.363h2.087l1.415 2.789q.195.4.269.591h.018c.094-.211.191-.416.293-.616l1.513-2.764h1.916l-2.66 4.338 2.727 4.412H10.87l-1.635-3.063a2.569 2.569 0 0 1-.2-.409h-.02a1.88 1.88 0 0 1-.189.4l-1.684 3.072z",fill:"#fff"})]})}},doc:{type:"doc",icon:function(e){var n=e.fontSize,t=void 0===n?"large":n,i=e.style,r=void 0===i?{}:i;return(0,s.jsxs)(a.Z,{fontSize:t,style:r,viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M16 4V1a1.003 1.003 0 0 0-1-1H4a1 1 0 0 0-1 1v3l6.5 1.379z",fill:"#41a5ee"}),(0,s.jsx)("path",{fill:"#2b7cd3",d:"M15.999 4h-13v4L9.5 9.168 15.999 8V4z"}),(0,s.jsx)("path",{fill:"#185abd",d:"M16 8H3v4l6.499 1L16 12V8z"}),(0,s.jsx)("path",{d:"M3 12v3a1.003 1.003 0 0 0 1 1h11a1 1 0 0 0 1-1v-3z",fill:"#103f91"}),(0,s.jsx)("path",{d:"M10 4.003L3 4l.002 10H9a2 2 0 0 0 2-2V5.002a1 1 0 0 0-1-1z",opacity:".5"}),(0,s.jsx)("rect",{y:"3",width:"10",height:"10",rx:"1",fill:"#185abd"}),(0,s.jsx)("path",{d:"M3.352 9.54q.026.213.034.372h.02q.011-.15.045-.364t.065-.36L4.429 5H5.61l.945 4.126a6.335 6.335 0 0 1 .118.778h.016a6.293 6.293 0 0 1 .098-.753L7.543 5h1.075l-1.323 6H6.04l-.901-3.975q-.04-.171-.089-.448t-.06-.401h-.017q-.015.146-.06.435t-.073.427L3.992 11H2.716L1.382 5h1.094L3.3 9.197q.028.13.053.343z",fill:"#fff"})]})}},pdf:{type:"pdf",icon:function(e){var n=e.fontSize,t=void 0===n?"large":n,i=e.style,r=void 0===i?{}:i;return(0,s.jsxs)(a.Z,{fontSize:t,style:r,viewBox:"0 0 14 16",children:[(0,s.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",children:[(0,s.jsx)("polygon",{points:"51.791 356.65 51.791 23.99 204.5 23.99 282.65 102.07 282.65 356.65",fill:"#fff",strokeWidth:"212.65"}),(0,s.jsx)("path",{d:"m201.19 31.99 73.46 73.393v243.26h-214.86v-316.66h141.4m6.623-16h-164.02v348.66h246.85v-265.9z",strokeWidth:"21.791"})]}),(0,s.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",children:[(0,s.jsx)("polygon",{points:"282.65 356.65 51.791 356.65 51.791 23.99 204.5 23.99 206.31 25.8 206.31 100.33 280.9 100.33 282.65 102.07",fill:"#fff",strokeWidth:"212.65"}),(0,s.jsx)("path",{d:"m198.31 31.99v76.337h76.337v240.32h-214.86v-316.66h138.52m9.5-16h-164.02v348.66h246.85v-265.9l-6.43-6.424h-69.907v-69.842z",strokeWidth:"21.791"})]}),(0,s.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",strokeWidth:"21.791",children:[(0,s.jsx)("polygon",{points:"258.31 87.75 219.64 87.75 219.64 48.667 258.31 86.38"}),(0,s.jsx)("path",{d:"m227.64 67.646 12.41 12.104h-12.41v-12.104m-5.002-27.229h-10.998v55.333h54.666v-12.742z"})]}),(0,s.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 -.66877 -.73379)",fill:"#ed1c24",strokeWidth:"212.65",children:[(0,s.jsx)("polygon",{points:"311.89 284.49 22.544 284.49 22.544 167.68 37.291 152.94 37.291 171.49 297.15 171.49 297.15 152.94 311.89 167.68"}),(0,s.jsx)("path",{d:"m303.65 168.63 1.747 1.747v107.62h-276.35v-107.62l1.747-1.747v9.362h272.85v-9.362m-12.999-31.385v27.747h-246.86v-27.747l-27.747 27.747v126h302.35v-126z"})]}),(0,s.jsx)("rect",{x:"1.7219",y:"7.9544",width:"10.684",height:"4.0307",fill:"none"}),(0,s.jsxs)("g",{transform:"matrix(.04589 0 0 .04589 1.7219 11.733)",fill:"#fff",strokeWidth:"21.791",children:[(0,s.jsx)("path",{d:"m9.216 0v-83.2h30.464q6.784 0 12.928 1.408 6.144 1.28 10.752 4.608 4.608 3.2 7.296 8.576 2.816 5.248 2.816 13.056 0 7.68-2.816 13.184-2.688 5.504-7.296 9.088-4.608 3.456-10.624 5.248-6.016 1.664-12.544 1.664h-8.96v26.368zm22.016-43.776h7.936q6.528 0 9.6-3.072 3.2-3.072 3.2-8.704t-3.456-7.936-9.856-2.304h-7.424z"}),(0,s.jsx)("path",{d:"m87.04 0v-83.2h24.576q9.472 0 17.28 2.304 7.936 2.304 13.568 7.296t8.704 12.8q3.2 7.808 3.2 18.816t-3.072 18.944-8.704 13.056q-5.504 5.12-13.184 7.552-7.552 2.432-16.512 2.432zm22.016-17.664h1.28q4.48 0 8.448-1.024 3.968-1.152 6.784-3.84 2.944-2.688 4.608-7.424t1.664-12.032-1.664-11.904-4.608-7.168q-2.816-2.56-6.784-3.456-3.968-1.024-8.448-1.024h-1.28z"}),(0,s.jsx)("path",{d:"m169.22 0v-83.2h54.272v18.432h-32.256v15.872h27.648v18.432h-27.648v30.464z"})]})]})}},image:{type:"image",icon:function(e){var n=e.fontSize,t=void 0===n?"large":n,a=e.style,r=void 0===a?{}:a;return(0,s.jsx)(i.Z,{fontSize:t,style:r})}},unknown:{type:void 0,icon:function(e){var n=e.fontSize,t=void 0===n?"large":n,a=e.style,i=void 0===a?{}:a;return(0,s.jsx)(r.Z,{fontSize:t,style:i})}}},o={xlsx:"excel",xls:"excel",doc:"doc",docx:"doc",pdf:"pdf",jpg:"image",png:"image",gif:"image",webp:"image",tiff:"image",raw:"image",bmp:"image",heif:"image",jpeg:"image",svg:"image",eps:"image"};function c(e){var n=e.split("."),t=n[n.length-1].toLowerCase();return o[t]}},9962:function(e,n,t){t.r(n),t.d(n,{default:function(){return me}});var a=t(29439),i=(t(56525),t(29464)),r=t(90977),s=t(4841),l=t(84642),o=t(41579),c=t.n(o),u=t(7043),d=t(72791),h=t(95962),f=t.n(h),v=t(77262),p=t(13889),x=t(62356),m=t(93539),g=(t(95321),t(38664)),y=t(34729),j=t(32290),Z=t(763),S=t(1413),b=t(45987),C=t(85771),L=t(4567),z=t(52411),k=t(49900),N=t(94721),W=t(80184),E=["category","label"],D=function(e){var n=e.category,t=e.label,a=(0,b.Z)(e,E);return(0,W.jsx)(C.Z,(0,S.Z)({label:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(L.Z,{component:"span",variant:"caption",color:"textSecondary",children:n}),(0,W.jsxs)(L.Z,{component:"span",style:{marginLeft:5},variant:"body2",children:["| ",t]})]}),variant:"outlined"},a))},w=function(e){var n=e.data,t=e.id,a=(e.highlighted,e.onSelected),i=n.Section,r=n.County,s=n.District,l=n.Highway;return(0,W.jsxs)("div",{children:[(0,W.jsx)(z.ZP,{alignItems:"flex-start",component:"div",children:(0,W.jsx)(k.Z,{primary:i,secondary:(0,W.jsxs)(d.Fragment,{children:[(0,W.jsx)(D,{category:"Highway",label:l,size:"small",color:"info"}),r&&"-"!==r&&(0,W.jsx)(D,{category:"County",label:r,size:"small"}),s&&"-"!==s&&(0,W.jsx)(D,{category:"District",label:s,size:"small"})]}),onClick:a})}),(0,W.jsx)(N.Z,{})]},"".concat(i,"_").concat(t))},A=t(8007),T=t(64554),G=t(93006),R=t(46314),q=t(5849),P=t(5574),M=t(65661),H=t(67414),V=t(77386),_=t(38820),I=t(58066),F=t(96739),O=t(4942),B=t(88588),J=t(22492),K=t(40986),U=t(99997),Y=t(69596),Q=t(4899);var X=function(e){var n=e.onClose,t=e.fileList,i=e.onReplace,r=(0,d.useState)([]),s=(0,a.Z)(r,2),l=s[0],o=s[1],c=(0,d.useState)({}),u=(0,a.Z)(c,2),h=u[0],f=u[1];(0,d.useEffect)((function(){var e=t.map((function(e){return e}));o(e),f(e[0])}),[t]);var v=(0,d.useCallback)((function(){i(h),l.shift(),l.length?(o(l),f(l[0])):n()}),[h,l]),p=(0,d.useCallback)((function(){l.forEach((function(e){return i(e)})),n()}),[l]),x=(0,d.useCallback)((function(){l.shift(),l.length?(o(l),f(l[0])):n()}),[h,l]);return(0,W.jsxs)(P.Z,{onClose:function(){n()},open:!0,children:[(0,W.jsxs)(M.Z,{children:["Replace or Skip ",t.length," file",t.length>1?"s":""]}),(0,W.jsx)(Q.Z,{children:(0,W.jsxs)(L.Z,{children:['Already has file named "',h.name,'"']})}),(0,W.jsxs)(V.Z,{children:[(0,W.jsx)(q.Z,{onClick:v,children:"Replace"}),(0,W.jsx)(q.Z,{onClick:x,children:"Skip"}),(0,W.jsx)(q.Z,{onClick:p,autoFocus:!0,children:"Replace All"})]})]})},$=t(88240);var ee=function(e){var n=e.title,t=void 0===n?"Media files":n,i=e.category,s=void 0===i?"media":i,l=e.multiple,o=e.Section,c=e.filelist,u=(0,d.useState)(!1),h=(0,a.Z)(u,2),f=h[0],v=h[1],p=(0,d.useState)([]),x=(0,a.Z)(p,2),m=x[0],j=x[1],Z=(0,d.useState)({}),b=(0,a.Z)(Z,2),C=b[0],z=b[1],k=(0,d.useState)([]),N=(0,a.Z)(k,2),E=N[0],D=N[1],w=(0,d.useState)([]),A=(0,a.Z)(w,2),T=A[0],G=A[1],R=(0,$.k5)(),q=R.openDialog,P=R.closeDialog,M=d.useRef(null);(0,d.useEffect)((function(){console.log(c),j(c?c.map((function(e){return{data:e,name:e.Name,type:(0,U.J)(e.Name)}})):[])}),[c]);var V=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?v(!0):"dragleave"===e.type&&v(!1)},_=function(e,n){var t=new FormData;return t.append("Section",o),t.append("SurveyType",n),t.append("file",e),(0,g.Mq)().uploadSurveyData(t,(function(n){var t=n.total,a=n.loaded/1e6/(t/1e6)*100;z((0,S.Z)((0,S.Z)({},C),{},(0,O.Z)({},e.name,a.toFixed(2))))})).then((function(n){var t=n.data;delete C[e.name],m.find((function(n){return n.name===e.name})).data=t,j(m),z(C)})).catch((function(e){}))},I=function(e){for(var n=[],t=[],a=function(a){m.find((function(n){return n.name===e[a].name}))?n.push(e[a]):(t.push(e[a]),C[e[a].name]=0,m.push({data:{},name:e[a].name,type:(0,U.J)(e[a].name)}))},i=0;i<e.length;i++)a(i);D(E),z((0,S.Z)({},C)),j(m),t.forEach((function(e){return _(e,s)})),G(n)};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(B.Z,{sx:{m:1,p:0},elevation:4,children:[(0,W.jsxs)(J.Z,{sx:{display:"flex",alignItems:"center",borderBottomColor:function(e){return e.palette.primary.light},borderWidth:0,borderBottomWidth:1,borderStyle:"solid",pt:1,pb:1},children:[(0,W.jsx)(L.Z,{sx:{flexGrow:1},children:t}),(0,W.jsx)(r.Z,{onClick:function(){M.current.click()},size:"small",children:(0,W.jsx)(Y.Z,{})})]}),(0,W.jsx)(J.Z,{children:(0,W.jsxs)("form",{className:"segment-file-upload",onDragEnter:V,onSubmit:function(e){return e.preventDefault()},style:{margin:"auto"},children:[(0,W.jsx)("input",{ref:M,type:"file",className:"input-file-upload",multiple:l,onChange:function(e){e.preventDefault(),e.target.files&&I(e.target.files)}}),(0,W.jsx)("label",{htmlFor:"input-file-upload",children:(0,W.jsx)(y.Z,{container:!0,className:"label-file-upload ".concat(m.length?"":"has-border"," ").concat(f?"drag-active":""),children:m.length?(0,W.jsx)(y.Z,{item:!0,xs:12,container:!0,sx:{textAlign:"center"},spacing:1,children:m.map((function(e){var n;return(0,W.jsxs)(y.Z,{item:!0,className:"fileHolder",children:[(0,W.jsx)(r.Z,{size:"small",className:"deleteIcon",onClick:function(){var n;q({id:"deleteFile",title:"Delete Survey data",message:'Do you want to delete "'.concat((n=e).name,"\" ? This action can't be undo."),action:"YES",handleAction:function(){(0,g.Mq)().deleteSurveyData(n.data).then((function(){j(m.filter((function(e){return e.name!==n.name})))})),P({id:"deleteFile"})}})},children:(0,W.jsx)(F.Z,{fontSize:"inherit"})}),(0,W.jsxs)(H.Z,{style:{maxWidth:100},alignItems:"center",spacing:1,onClick:function(){return function(e){var n=(0,g.Mq)().getFilePath({Section:o,SurveyType:s,Name:e.name});window.open("https://docs.google.com/gview?url=".concat(n),"_blank","toolbar=0,location=0,menubar=0")}(e)},children:[(null!==(n=U.u[e.type])&&void 0!==n?n:U.u.unknown).icon(C[e.name]?{style:{opacity:.5}}:{}),C[e.name]&&(0,W.jsx)(K.Z,{variant:"determinate",value:C[e.name],style:{maxWidth:80,width:"100%"}}),(0,W.jsx)(L.Z,{variant:"body2",gutterBottom:!0,style:{overflowWrap:"break-word",maxWidth:100},children:e.name})]})]},e.name)}))}):(0,W.jsx)(y.Z,{item:!0,xs:12,sx:{textAlign:"center"},children:(0,W.jsx)(L.Z,{children:"Drag & Drop files"})})})}),f&&(0,W.jsx)("div",{className:"drag-file-element",onDragEnter:V,onDragLeave:V,onDragOver:V,onDrop:function(e){e.preventDefault(),e.stopPropagation(),v(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&I(e.dataTransfer.files)}})]})})]}),!!T.length&&(0,W.jsx)(X,{onClose:function(){return G([])},fileList:T,onReplace:function(e){C[e.name]=0,z((0,S.Z)({},C)),_(e,s)}})]})},ne=t(98297),te=t(98291);var ae=function(e){var n=e.Section,t=(e.SurveyLevels,e.SurveyTypes,e.list),i=(0,ne.Wz)().getList,r=(0,d.useState)(new Map),s=(0,a.Z)(r,2),l=s[0],o=s[1],c=function(e,t){t.SurveyLevel,t.SurveyType;return(0,g.Mq)().editSurveyData(n,e)};return(0,d.useEffect)((function(){o((0,te.ruo)(null!==t&&void 0!==t?t:[],(function(e){return e["Survey Type"]})))}),[t]),(0,W.jsx)(W.Fragment,{children:i("surveyType").map((function(e){return(0,W.jsx)(ee,{levels:i("surveyLevel"),Section:n,filelist:l.get(e["Short Name"]),category:e["Short Name"],title:e.Name,onEditFile:c},e.Name)}))})},ie=t(55705),re=["accessorKey","xs","type","options","InputLabelProps"];A.kM(A.Z_,"gpsFormat",(function(e){return this.test("test-gps-format",e,(function(n){var t=this.path,a=this.createError,i=n?"-"===n?[0,0]:n.match(/(N|W|n|w)[-+]?([0-9]*\.[0-9]+|[0-9]+)\xb0( |)[-+]?([0-9]*\.[0-9]+|[0-9]+)'( |)[-+]?([0-9]*\.[0-9]+|[0-9]+)"/g):null;return i&&2===i.length||a({path:t,message:e})}))}));var se=A.Ry({Section:A.Z_("Enter your password").min(3,"Section should be of minimum 3 characters length").required("Section is required"),"GPS (Start)":A.Z_().gpsFormat("Wrong GPS format"),"GPS (End)":A.Z_().gpsFormat("Wrong GPS format")}),le={Section:{xs:6},CSJ:{xs:6},Highway:{xs:6},County:{xs:6},District:{xs:6},State:{xs:6},Direction:{xs:6},"Data Type":{},"Reference Marker":{},"GPS (Start)":{},"GPS (End)":{},"Construction Year":{},"Horizontal Alignment":{},"Vertical Alignment":{},"Pavement Type":{},"Slab Thickness":{},"Basetype & Thickness":{},"Subgrade Treat & Thick":{},"Shoulder Type":{},"Surface Texture":{},"Concrete CAT":{},Drainage:{}},oe=[],ce=function(){};function ue(e){var n=e.accessorKey,t=e.xs,a=e.type,i=e.options,r=void 0===i?oe:i,s=e.InputLabelProps,l=(0,b.Z)(e,re);return(0,W.jsx)(y.Z,{item:!0,xs:t,children:"choice"===a?(0,W.jsx)(R.Z,(0,S.Z)((0,S.Z)({fullWidth:!0,size:"small",options:null!==r&&void 0!==r?r:[]},l),{},{renderInput:function(e){return(0,W.jsx)(G.Z,(0,S.Z)({label:l.label},e))}})):"gps"===a?(0,W.jsx)(G.Z,(0,S.Z)({fullWidth:!0,type:a,size:"small",InputLabelProps:(0,S.Z)({shrink:!0},s)},l)):(0,W.jsx)(G.Z,(0,S.Z)({fullWidth:!0,type:a,size:"small",InputLabelProps:{shrink:!0}},l))},n)}function de(e){var n=e.Section,t=e.onClose,s=void 0===t?ce:t,l=(0,d.useState)(!0),o=(0,a.Z)(l,2),c=(o[0],o[1]),u=(0,d.useState)(),h=(0,a.Z)(u,2),f=h[0],v=(h[1],(0,ne.Wz)()),p=v.getSection,x=v.querySection,m=v.isLoading,j=(0,ie.TA)({initialValues:{},validationSchema:se,onSubmit:function(e){alert(JSON.stringify(e,null,2))}});return(0,d.useEffect)((function(){x(n)}),[n]),(0,d.useEffect)((function(){c(m("section"))}),[m("section")]),(0,d.useEffect)((function(){p(n).Section&&j.setValues(p(n))}),[p(n)]),(0,W.jsxs)("div",{children:[(0,W.jsxs)(T.Z,{component:"form",onSubmit:j.handleSubmit,children:[(0,W.jsxs)(i.Z,{sx:{p:0},children:[(0,W.jsx)(q.Z,{edge:"start","aria-label":"edit",size:"small",variant:"contained",startIcon:(0,W.jsx)(_.Z,{}),type:"submit",children:"Edit"}),(0,W.jsx)(q.Z,{edge:"start","aria-label":"edit",size:"small",variant:"outlined",startIcon:(0,W.jsx)(I.Z,{}),children:"Location"}),(0,W.jsx)(L.Z,{sx:{flexGrow:1}}),(0,W.jsx)(r.Z,{edge:"start","aria-label":"edit",size:"small",onClick:s,children:(0,W.jsx)(F.Z,{})})]}),(0,W.jsxs)(y.Z,{container:!0,spacing:1,children:[g.Iv.map((function(e){var n,t=e.accessorKey,a=e.header,i=e.type,r=e.options;return(0,W.jsx)(ue,{label:a,name:a,value:j.values[t]?"-"===j.values[t]?null:j.values[t]:null,xs:null!==(n=le[t].xs)&&void 0!==n?n:6,onChange:j.handleChange,error:Boolean(j.errors[t]),helperText:j.errors[t],accessorKey:t,options:r,type:i},t)})),(0,W.jsx)(y.Z,{item:!0,xs:12,children:(0,W.jsx)(ae,{Section:j.values.Section,list:j.values.SurveyData})})]})]}),f&&(0,W.jsx)(fe,{selectedValue:j.values[f.key],open:!0,onClose:function(e){return j.setValue(f.key,e)}})]},"form_".concat(n))}var he=A.Ry({Na:A.Rx(),Nb:A.Rx(),Nc:A.Rx(),Wa:A.Rx(),Wb:A.Rx(),Wc:A.Rx()});function fe(e){var n=e.onClose,t=(e.selectedValue,e.open),a=e.value,i=(0,ie.TA)({initialValues:{Na:0,Nb:0,Nc:0,Wa:0,Wb:0,Wc:0},validationSchema:he,onSubmit:function(e){alert(JSON.stringify(e,null,2))}});(0,d.useEffect)((function(){if(a){var e=function(e){return e.split(/\ufffd|'|"|\xb0/).map((function(e){return+e}))},n=a.match(/[A-Z]/gi);if(null!==n){var t=a.split(/[A-Z]/i),r=e(t[1]),s=e(t[2]);"S"!==n[0]&&"s"!==n[1]||(r[0]=-r[0]),"E"!==n[1]&&"e"!==n[1]||(s[0]=-s[0]),i.setValues({Na:r[0],Nb:r[1],Nc:r[2],Wa:s[0],Wb:s[1],Wc:s[2]})}}}),[a]);var r=function(){n(a)};return(0,W.jsxs)(P.Z,{onClose:r,open:t,children:[(0,W.jsx)(M.Z,{children:"GPS format"}),(0,W.jsxs)(H.Z,{direction:"row",spacing:1,sx:{marginLeft:5,marginRight:5},children:[(0,W.jsx)(L.Z,{children:"N"}),(0,W.jsx)(G.Z,{variant:"standard",hiddenLabel:!0,size:"small",type:"number",name:"Na",value:i.values.Na,onChange:i.handleChange,sx:{maxWidth:50}}),(0,W.jsx)(L.Z,{children:"\xb0"}),(0,W.jsx)(G.Z,{variant:"standard",hiddenLabel:!0,size:"small",type:"number",name:"Nb",value:i.values.Nb,onChange:i.handleChange,sx:{maxWidth:50}}),(0,W.jsx)(L.Z,{children:"'"}),(0,W.jsx)(G.Z,{variant:"standard",hiddenLabel:!0,size:"small",type:"number",name:"Nc",value:i.values.Nc,onChange:i.handleChange,sx:{maxWidth:50}}),(0,W.jsx)(L.Z,{style:{marginRight:10},children:'" '}),(0,W.jsx)(L.Z,{children:"W"}),(0,W.jsx)(G.Z,{variant:"standard",hiddenLabel:!0,size:"small",type:"number",name:"Wa",value:i.values.Wa,onChange:i.handleChange,sx:{maxWidth:50}}),(0,W.jsx)(L.Z,{children:"\xb0"}),(0,W.jsx)(G.Z,{variant:"standard",hiddenLabel:!0,size:"small",type:"number",name:"Wb",value:i.values.Wb,onChange:i.handleChange,sx:{maxWidth:50}}),(0,W.jsx)(L.Z,{children:"'"}),(0,W.jsx)(G.Z,{variant:"standard",hiddenLabel:!0,size:"small",type:"number",name:"Wc",value:i.values.Wc,onChange:i.handleChange,sx:{maxWidth:50}}),(0,W.jsx)(L.Z,{children:'"'})]}),(0,W.jsxs)(V.Z,{children:[(0,W.jsx)(q.Z,{onClick:r,children:"Cancel"}),(0,W.jsx)(q.Z,{onClick:function(){var e=i.values,t=e.Na,a=e.Nb,r=e.Nc,s=e.Wa,l=e.Wb,o=e.Wc;n("N".concat(t,"\xb0").concat(a,"' ").concat(r,'" W').concat(s,"\xb0").concat(l,"' ").concat(o,'"'))},children:"Save"})]})]})}var ve="sectionData",pe={},xe=[],me=function(){var e=(0,m.Z)(),n=(0,x.useFilter)(),t=n.openFilter,o=n.getList,h=n.getFilter,S=n.setSearch,b=h(ve),C=b.queries,L=void 0===C?xe:C,z=b.search,k=void 0===z?pe:z,N=k.value,E=void 0===N?"":N,D=(0,d.useState)([]),A=(0,a.Z)(D,2),T=A[0],G=A[1],R=(0,d.useState)([]),q=(0,a.Z)(R,2),P=q[0],M=q[1],H=(0,d.useState)([]),V=(0,a.Z)(H,2),_=V[0],I=V[1],F=(0,d.useState)([]),O=(0,a.Z)(F,2),B=O[0],J=O[1],K=(0,d.useState)([]),U=(0,a.Z)(K,2),Y=U[0],Q=U[1],X=(0,d.useState)({}),$=(0,a.Z)(X,2),ee=$[0],ne=$[1],te=(0,d.useTransition)(),ae=(0,a.Z)(te,2),ie=(ae[0],ae[1]);(0,d.useEffect)((function(){(0,g.Mq)().getSections().then((function(e){var n=e.data;return(0,g.Mq)().getSectionFields().then((function(e){var t=e.data;G(t.map((function(e){return{name:e.name,label:e.name}}))),n.forEach((function(e){null!==e["GPS (End)"]&&"-"!==e["GPS (End)"]&&(e._GPSEnd=je(e["GPS (End)"])),null!==e["GPS (Start)"]&&"-"!==e["GPS (Start)"]&&(e._GPSStart=je(e["GPS (Start)"])),null!==e.County&&"-"!==e.County&&(e._County=e.County.split(/&|\/| and /).map((function(e){return e.trim().toLowerCase()})))})),M(n,t)}))})).catch((function(){G([]),M([])}))}),[]);var re=(0,d.useRef)(null),se=(0,d.useRef)(null);(0,d.useEffect)((function(){ie((function(){var e=o(ve,P,T);Q(e),I((0,Z.uniq)((0,Z.flatten)(e.filter((function(e){return null!==e._County})).map((function(e){return e._County}))))),J((0,Z.uniq)((0,Z.flatten)(e.filter((function(e){return null!==e.District})).map((function(e){return e.District})))))}))}),[L,k,P,T]);var le=(0,d.useCallback)((function(){ne({})}),[ee]),oe=(0,d.useCallback)((function(e){var n=Y.find((function(n){return n.Section===e}));n&&ne(n)}),[Y]);return(0,W.jsxs)(u.default,{pageTitle:e.formatMessage({id:"map",defaultMessage:"Section information"},{count:Y.length}),contentStyle:{overflow:"hidden"},appBarContent:(0,W.jsxs)(i.Z,{disableGutters:!0,children:[(0,W.jsx)(f(),{initialValue:E,onChange:function(e){S(ve,e)}}),(0,W.jsx)(r.Z,{color:"inherit",onClick:function(){return t(ve)},children:(0,W.jsx)(l.Z,{color:L.length>0?"secondary":void 0})})]}),children:[(0,W.jsxs)(y.Z,{container:!0,style:{height:"100%"},children:[(0,W.jsx)(y.Z,{item:!0,xs:5,md:4,sx:{zIndex:1},children:(0,W.jsxs)(s.Z,{elevation:16,sx:{height:"100%",width:"100%",p:1},ref:se,children:[ee.Section&&(0,W.jsx)(p.Scrollbars,{children:(0,W.jsx)(de,{Section:ee?ee.Section:void 0,onClose:le})}),(0,W.jsx)(p.Scrollbars,{style:{display:ee.Section?"none":void 0},children:(0,W.jsx)(v.ViewportList,{ref:re,viewportRef:se,items:Y,children:function(e,n){return(0,W.jsx)(w,{data:e,id:n,highlighted:ee.Section===e.Section,onSelected:function(){return ne(e)}})}})})]})}),(0,W.jsx)(y.Z,{item:!0,xs:7,md:8,style:{height:"100%"},children:(0,W.jsx)(j.Z,{allCounties:_,plotCountyOption:!0,allDistrics:B,plotDistrictOption:!0,roadData:Y,onClick:oe})})]}),(0,W.jsx)(c(),{fields:T,name:ve})]})},ge="lat",ye="lng";function je(e){var n=e.match(/[A-Z]/gi),t={};if(null!==n){var i=e.split(/[A-Z]/i);t[ye]=l(s(i[2])),t[ge]=l(s(i[1])),"S"!==n[0]&&"s"!==n[1]||(t[ge]=-t[ge]),"W"!==n[1]&&"w"!==n[1]||(t[ye]=-t[ye])}else{var r=e.split(",");t[ye]=+r[1],t[ge]=+r[0]}return t;function s(e){return e.split(/\ufffd|'|"|\xb0/).map((function(e){return+e}))}function l(e){var n=(0,a.Z)(e,3);return n[0]+n[1]/60+n[2]/3600}}}}]);
//# sourceMappingURL=155.2d7b6f66.chunk.js.map